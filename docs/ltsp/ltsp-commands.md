# Εντολές LTSP

Το μενού ***Εξυπηρετητής*** ▸ ***Εντολές LTSP*** της εφαρμογής ***Διαχείριση
ΣΕΠΕΗΥ*** `sch-scripts` δίνει την δυνατότητα να εκτελέσουμε τις παρακάτω
εντολές ρύθμισης του LTSP.

!!! tip "Συμβουλή"

    Χρειάζεται να εκτελέσετε:

      - κατά την **αρχική εγκατάσταση** του εξυπηρετητή, **όλες τις εντολές** που
        έχουν εικονίδιο ![✔][✔] με τη σειρά,
      - μετά από **προσθαφαίρεση προγραμμάτων** του εξυπηρετητή, την εντολή [ltsp
        image](#ltsp-image),
      - μετά από **προσθαφαίρεση λογαριασμών χρηστών** ή αλλαγών στο αρχείο
        ρυθμίσεων `ltsp.conf`, την εντολή [ltsp initrd](#ltsp-initrd).

## ![✔][✔] ltsp image

Η εντολή `ltsp image /` δημιουργεί τον **εικονικό δίσκο** από τον οποίο
ξεκινάνε οι σταθμοί εργασίας. Χρησιμοποιήστε την όταν έχετε εγκαταστήσει νέα
προγράμματα στον εξυπηρετητή και θέλετε να εμφανιστούν και στους clients. Αφού
τελειώσει η δημοσίευση, οι clients χρειάζεται να επανεκκινηθούν.

Η δημοσίευση συμπιέζει όλο τον δίσκο `/` του εξυπηρετητή, παραλείποντας
ορισμένους φακέλους όπως το `/home`, και τοποθετεί το αποτέλεσμα στο
`/srv/ltsp/images/x86_64.img`. Οι clients το προσαρτούν μέσω δικτύου σαν να
ήταν live USB, δηλαδή όλες οι αλλαγές εκτός του /home γίνονται στην RAM και
χάνονται μετά από επανεκκίνηση.

## ![✖][✖] ltsp image -r

Η εντολή `ltsp image -r /` **επαναφέρει** τον αμέσως προηγούμενο εικονικό
δίσκο. Χρησιμοποιήστε την εάν κάνατε δημοσίευση και οι clients για κάποιον λόγο
δεν εκκινούν με τον νέο εικονικό δίσκο. Η επαναφορά ουσιαστικά μετονομάζει και
αντιμεταθέτει το αρχείο `/srv/ltsp/images/x86_64.img` με το
`/srv/ltsp/images/x86_64.old`.

## ![✖][✖] ltsp dnsmasq

Ρυθμίζει την υπηρεσία dnsmasq για το παρόν υποδίκτυο. Χρειάζεται όταν ο LTSP
server μετακινείται σε άλλο σχολείο, αλλά καλύτερα να χρησιμοποιείτε την
***Ρύθμιση σύνδεσης δικτύου*** αντί γι' αυτήν.

## ![✖][✖] ltsp info

Εμφανίζει πληροφορίες έκδοσης και υποστήριξης του LTSP.

## ![✔][✔] ltsp initrd

Δημιουργεί το αρχείο `/srv/tftp/ltsp/ltsp.img`, μέσω του οποίου στέλνονται
στους clients οι χρήστες και οι ρυθμίσεις του LTSP. Χρειάζεται αφού προστεθούν
χρήστες ή αφού γίνει επεξεργασία του αρχείου ρυθμίσεων `ltsp.conf`. Οι clients
χρειάζονται επανεκκίνηση για να πάρουν τις αλλαγές.

## ![✔][✔] ltsp ipxe

Δημιουργεί το αρχείο `/srv/tftp/ltsp/ltsp.ipxe`, που είναι το μπλε μενού που
εμφανίζεται κατά την εκκίνηση των clients. Χρειάζεται μια φορά μετά την αρχική
δημοσίευση εικονικού δίσκου, ή αν αλλάξετε κάποιες ειδικές ρυθμίσεις του
`ltsp.conf` όπως το `MENU_TIMEOUT`.

## ![✖][✖] ltsp kernel

Εξάγει τον πυρήνα από τον εικονικό δίσκο `/srv/ltsp/images/x86_64.img` και τον
τοποθετεί στον φάκελο `/srv/tftp/ltsp/x86_64`. Δεν χρειάζεται να την καλείτε
παρά μόνο αν σας ζητηθεί.

## ![✔][✔] ltsp nfs

Δημιουργεί το αρχείο `/etc/exports.d/ltsp-nfs.exports` με τους φακέλους που
επιτρέπεται να δουν οι clients μέσω δικτύου. Χρειάζεται μια φορά μετά την
αρχική εγκατάσταση, ή μετά από προσθήκη ή αφαίρεση κοινόχρηστων φακέλων.

[link-reference-definitions]: https://github.github.com/gfm/#link-reference-definitions
[✔]: ../images/v.svg
[✖]: ../images/x.svg
